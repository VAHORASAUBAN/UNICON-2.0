{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>UNICON</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0" />

  <link rel="shortcut icon" type="image/x-icon" href="{% static 'assets/img/logo_unicon.png' %}" />

  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900" rel="stylesheet" />
  <link rel="stylesheet" href="{% static 'assets/css/bootstrap.min.css' %}" />

  <!-- Replacing the local FontAwesome with the CDN link -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" />

  <link rel="stylesheet" href="{% static 'assets/css/select2.min.css' %}" />
  <link rel="stylesheet" href="{% static 'assets/css/style.css' %}" />
  <!--[if lt IE 9]>
      <script src="{% static 'assets/js/html5shiv.min.js' %}"></script>
      <script src="{% static 'assets/js/respond.min.js' %}"></script>
    <![endif]-->
  <style>
    .sidebar-menu .active-li>a {
      background-color: #004688 !important;
      color: #fff !important;
    }
  </style>
</head>

<body>
  <div class="header-outer">
    <div class="header">
      <a id="mobile_btn" class="mobile_btn float-left" href="#sidebar">
        <i class="fas fa-bars" aria-hidden="true"></i>
      </a>
      <a id="toggle_btn" class="float-left" href="javascript:void(0);">
        <i
          class="ri-layout-grid-fill"
          style="font-size: 2em; color: #337ab7"
        ></i>
      </a>

      <ul class="nav float-left">
        <li>
          <div class="top-nav-search">
            <a href="javascript:void(0);" class="responsive-search">
              <i class="fa fa-search"></i>
            </a>
            <form action="#">
              <input
                class="form-control"
                type="text"
                placeholder="Search here"
              />
              <button class="btn" type="submit">
                <i class="fa fa-search"></i>
              </button>
            </form>
          </div>
        </li>
        <li>
          <a
            href="/index/"
            class="mobile-logo d-md-block d-lg-none d-block"
          >
            <img
              src="{% static 'assets/img/logo1.png' %}"
              alt=""
              width="30"
              height="30"
            />
          </a>
        </li>
      </ul>

      <ul class="nav user-menu float-right">
        <li class="nav-item dropdown d-none d-sm-block">
          <a
            href="#"
            class="dropdown-toggle nav-link"
            data-toggle="dropdown"
          >
            <i class="fa-solid fa-bell" style="color: #337ab7"></i>
          </a>
          <div class="dropdown-menu notifications">
            <div class="topnav-dropdown-header">
              <span>Notifications</span>
            </div>
            <div class="drop-scroll">
              <ul class="notification-list">
                <li class="notification-message">
                  <a href="activities">
                    <div class="media">
                      <span class="avatar">
                        <img
                          alt="John Doe"
                          src="{% static 'assets/img/user-06.jpg' %}"
                          class="img-fluid rounded-circle"
                        />
                      </span>
                      <div class="media-body">
                        <p class="noti-details">
                          <span class="noti-title">John Doe</span> is now
                          following you
                        </p>
                        <p class="noti-time">
                          <span class="notification-time">4 mins ago</span>
                        </p>
                      </div>
                    </div>
                  </a>
                </li>
                <li class="notification-message">
                  <a href="activities">
                    <div class="media">
                      <span class="avatar">T</span>
                      <div class="media-body">
                        <p class="noti-details">
                          <span class="noti-title">Tarah Shropshire</span>
                          sent you a message.
                        </p>
                        <p class="noti-time">
                          <span class="notification-time">6 mins ago</span>
                        </p>
                      </div>
                    </div>
                  </a>
                </li>
                <li class="notification-message">
                  <a href="activities">
                    <div class="media">
                      <span class="avatar">L</span>
                      <div class="media-body">
                        <p class="noti-details">
                          <span class="noti-title">Misty Tison</span> liked
                          your photo.
                        </p>
                        <p class="noti-time">
                          <span class="notification-time">8 mins ago</span>
                        </p>
                      </div>
                    </div>
                  </a>
                </li>
                <li class="notification-message">
                  <a href="activities">
                    <div class="media">
                      <span class="avatar">G</span>
                      <div class="media-body">
                        <p class="noti-details">
                          <span class="noti-title">Rolland Webber</span>
                          booked an appointment for a meeting.
                        </p>
                        <p class="noti-time">
                          <span class="notification-time">12 mins ago</span>
                        </p>
                      </div>
                    </div>
                  </a>
                </li>
                <li class="notification-message">
                  <a href="activities">
                    <div class="media">
                      <span class="avatar">T</span>
                      <div class="media-body">
                        <p class="noti-details">
                          <span class="noti-title">Bernardo Galaviz</span>
                          liked your photo.
                        </p>
                        <p class="noti-time">
                          <span class="notification-time">2 days ago</span>
                        </p>
                      </div>
                    </div>
                  </a>
                </li>
              </ul>
            </div>
            <div class="topnav-dropdown-footer">
              <a href="activities">View all Notifications</a>
            </div>
          </div>
        </li>
        <li class="nav-item dropdown has-arrow">
          <a href="#" class="nav-link user-link" data-toggle="dropdown">
            <span class="user-img">
              <i class="fa-solid fa-user" style="color: #337ab7"></i>
            </span>
          </a>
          <div class="dropdown-menu">
            <a class="dropdown-item" href="/profile/">My Profile</a>
            <a class="dropdown-item" href="/edit_profile/">Edit Profile</a>
            <a class="dropdown-item" href="/logout/">Logout</a>
          </div>
        </li>
      </ul>
      <div class="dropdown mobile-user-menu float-right">
        <a
          href="#"
          class="nav-link dropdown-toggle"
          data-toggle="dropdown"
          aria-expanded="false"
        >
          <i class="fas fa-ellipsis-v"></i>
        </a>
        <div class="dropdown-menu dropdown-menu-right">
          <a class="dropdown-item" href="/profile/">My Profile</a>
          <a class="dropdown-item" href="/edit-profile/">Edit Profile</a>
          <a class="dropdown-item" href="/settings/">Settings</a>
          <a class="dropdown-item" href="/logout/">Logout</a>
        </div>
      </div>
    </div>
  </div>
  <div class="sidebar" id="sidebar">
    <div class="sidebar-inner slimscroll">
      <div id="sidebar-menu" class="sidebar-menu">
        <div class="header-left">
          <a href="/index/" class="logo">
            <img style="margin-top: -30px;" src="{% static 'assets/img/brand_logo.png' %}" width="150" height="150" alt="" />
          </a>
        </div>
        <ul class="sidebar-ul">
          <li class="menu-title">Menu</li>
          <li>
            <a href="/index/"><i class="fa-solid fa-house"
                style="font-size: 1.5em; color: #337AB7; margin-left: 0px;"></i><span>Dashboard</span></a>
          </li>
          <li class="submenu">
            <a href="#" data-menu="faculty"><i class="fa-solid fa-user-tie"
                style="font-size: 1.5em; color: #337AB7; margin-left: 0px;"></i>
              <span> Faculty</span> <span class="menu-arrow"></span></a>
            <ul class="list-unstyled" style="display: none">
              <li><a href="/all_teachers/"><span>All Faculty</span></a></li>
              <li><a href="/add_teacher/"><span>Add Faculty</span></a></li>
            </ul>
          </li>

          <li class="submenu">
            <a href="#" data-menu="students"><i class="fa-solid fa-user-graduate"
                style="font-size: 1.5em; color: #337AB7; margin-left: 0px;"></i>
              <span> Students</span> <span class="menu-arrow"></span></a>
            <ul class="list-unstyled" style="display: none">
              <li><a href="/all_students/"><span>All Students</span></a></li>
              <li><a href="/add_student/"><span>Add Student</span></a></li>
            </ul>
          </li>

          <li class="submenu">
            <a href="#" data-menu="department"><i class="fa-solid fa-building"
                style="font-size: 1.5em; color: #337AB7; margin-left: 0px;"></i>
              <span> Department</span> <span class="menu-arrow"></span></a>
            <ul class="list-unstyled" style="display: none">
              <li><a href="/all_department/"><span>All Department</span></a></li>
              <li><a href="/add_department/"><span>Add Department</span></a></li>
            </ul>
          </li>

          <li class="submenu">
            <a href="#" data-menu="course"><i class="fa-solid fa-book"
                style="font-size: 1.5em; color: #337AB7; margin-left: 0px;"></i>
              <span> Course</span> <span class="menu-arrow"></span></a>
            <ul class="list-unstyled" style="display: none">
              <li><a href="/add_course/"><span>Add Course</span></a></li>
              <li><a href="/all_course/"><span>All Course</span></a></li>
            </ul>
          </li>

          <li class="submenu">
            <a href="#" data-menu="batch"><i class="fa-solid fa-users"
                style="font-size: 1.5em; color: #337AB7; margin-left: 0px;"></i>
              <span> Batch</span> <span class="menu-arrow"></span></a>
            <ul class="list-unstyled" style="display: none">
              <li><a href="/add_batch/"><span>Add Batch</span></a></li>
              <li><a href="/all_batch/"><span>All Batch</span></a></li>
            </ul>
          </li>

          <li class="submenu">
            <a href="#" data-menu="subject"><i class="fa-solid fa-flask"
                style="font-size: 1.5em; color: #337AB7; margin-left: 0px;"></i>
              <span> Subject</span> <span class="menu-arrow"></span></a>
            <ul class="list-unstyled" style="display: none">
              <li><a href="/all_subject/"><span>All Subject</span></a></li>
              <li><a href="/add_subject/"><span>Add Subject</span></a></li>
            </ul>
          </li>
          <li class="submenu">
            <a href="#" data-menu="timetable"><i class="fa-solid fa-calendar-alt"
                style="font-size: 1.5em; color: #337AB7; margin-left: 0px;"></i>
              <span> Time Table</span> <span class="menu-arrow"></span></a>
            <ul class="list-unstyled" style="display: none">
              <li><a href="/show_timetable/"><span>Show Time Table</span></a></li>
              <li><a href="/add_timetable/"><span>Add Time Table</span></a></li>
            </ul>
          </li>
          <li class="submenu">
            <a href="#" data-menu="Placement"><i class="fa-solid fa-briefcase"
                style="font-size: 1.5em; color: #337AB7; margin-left: 0px;"></i>
              <span> Placement</span> <span class="menu-arrow"></span></a>
            <ul class="list-unstyled" style="display: none">
              <li><a href="/show_placement/"><span>Show Placement</span></a></li>
              <li><a href="/add_placement/"><span>Add Placement</span></a></li>
            </ul>
          </li>

          <li>
            <a href="/calendar/"><i class="fa-solid fa-calendar-check"
                style="font-size: 1.5em; color: #337AB7; margin-left: 0px;"></i><span>
                Events</span></a>
          </li>
          <li class="submenu">
            <a href="#" data-menu="Placement"><i class="fa-solid fa-newspaper"
                style="font-size: 1.5em; color: #337AB7; margin-left: 0px;"></i>
              <span> Blog</span> <span class="menu-arrow"></span></a>
            <ul class="list-unstyled" style="display: none">
              <li><a href="/blog_details/"><span>Show blog</span></a></li>
              <li><a href="/add_blog/"><span>Add Blog</span></a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </div>
  {% block body %}{% endblock body %}
</body>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    let activeMenu = localStorage.getItem("activeMenu");

    // Highlight the active submenu item based on the current URL
    const currentPath = window.location.pathname;
    document.querySelectorAll(".sidebar-ul a").forEach((link) => {
      if (link.getAttribute("href") === currentPath) {
        document.querySelectorAll(".sidebar-ul li").forEach((li) => {
          li.classList.remove("active-li");
        });
        const parentSubmenu = link.closest(".submenu");
        if (parentSubmenu) {
          parentSubmenu.classList.add("active-li");
        } else {
          link.closest("li").classList.add("active-li");
        }
      }
    });

    // Open the last opened menu only if it was stored
    if (activeMenu) {
      let activeSubmenu = document.querySelector(`a[data-menu="${activeMenu}"]`);
      if (activeSubmenu) {
        let submenu = activeSubmenu.parentElement.querySelector("ul");
        submenu.style.display = "block"; // Keep submenu open
        activeSubmenu.classList.add("active"); // Highlight the active menu
      }
    }

    // Click event to toggle menu storage
    document.querySelectorAll(".submenu > a").forEach((menu) => {
      menu.addEventListener("click", function (e) {
        e.preventDefault(); // Prevent default anchor behavior

        let submenu = this.parentElement.querySelector("ul");
        let menuName = this.getAttribute("data-menu");

        if (submenu.style.display === "block") {
          submenu.style.display = "none"; // Close submenu
          localStorage.removeItem("activeMenu"); // Remove from storage
        } else {
          // Close other submenus before opening a new one
          document.querySelectorAll(".submenu ul").forEach((ul) => {
            ul.style.display = "none";
          });

          submenu.style.display = "block"; // Open submenu
          localStorage.setItem("activeMenu", menuName); // Store the last opened menu
        }
      });
    });

    // By default, set the dashboard link as active
    if (!activeMenu && currentPath === "/index/") {
      document.querySelector('a[href="/index/"]').closest("li").classList.add("active-li");
    }
  });
</script>
<script src="{% static 'assets/js/jquery-3.6.0.min.js' %}"></script>
<script src="{% static 'assets/js/bootstrap.bundle.min.js' %}"></script>
<script src="{% static 'assets/js/jquery.slimscroll.js' %}"></script>
<script src="{% static 'assets/js/select2.min.js' %}"></script>
<script src="{% static 'assets/js/moment.min.js' %}"></script>
<script src="{% static 'assets/js/app.js' %}"></script>

</html>